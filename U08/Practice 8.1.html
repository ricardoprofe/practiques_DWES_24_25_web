<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-UK" xml:lang="en-UK" >

<head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />        <title>Unit 08. Practice 8.1</title>
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        div.columns{display: flex; gap: min(4vw, 1.5em);}
        div.column{flex: auto; overflow-x: auto;}
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
        /* The extra [class] is a hack that increases specificity enough to
           override a similar rule in reveal.js */
        ul.task-list[class]{list-style: none;}
        ul.task-list li input[type="checkbox"] {
          font-size: inherit;
          width: 0.8em;
          margin: 0 0.8em 0.2em -1.6em;
          vertical-align: middle;
        }
        .display.math{display: block; text-align: center; margin: 0.5rem auto;}
        /* CSS for syntax highlighting */
        pre > code.sourceCode { white-space: pre; position: relative; }
        pre > code.sourceCode > span { line-height: 1.25; }
        pre > code.sourceCode > span:empty { height: 1.2em; }
        .sourceCode { overflow: visible; }
        code.sourceCode > span { color: inherit; text-decoration: inherit; }
        div.sourceCode { margin: 1em 0; }
        pre.sourceCode { margin: 0; }
        @media screen {
        div.sourceCode { overflow: auto; }
        }
        @media print {
        pre > code.sourceCode { white-space: pre-wrap; }
        pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
        }
        pre.numberSource code
          { counter-reset: source-line 0; }
        pre.numberSource code > span
          { position: relative; left: -4em; counter-increment: source-line; }
        pre.numberSource code > span > a:first-child::before
          { content: counter(source-line);
            position: relative; left: -1em; text-align: right; vertical-align: baseline;
            border: none; display: inline-block;
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
            padding: 0 4px; width: 4em;
            color: #aaaaaa;
          }
        pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
        div.sourceCode
          {  background-color: #f8f8f8; }
        @media screen {
        pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
        }
        code span.al { color: #ef2929; } /* Alert */
        code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
        code span.at { color: #204a87; } /* Attribute */
        code span.bn { color: #0000cf; } /* BaseN */
        code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
        code span.ch { color: #4e9a06; } /* Char */
        code span.cn { color: #8f5902; } /* Constant */
        code span.co { color: #8f5902; font-style: italic; } /* Comment */
        code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
        code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
        code span.dt { color: #204a87; } /* DataType */
        code span.dv { color: #0000cf; } /* DecVal */
        code span.er { color: #a40000; font-weight: bold; } /* Error */
        code span.ex { } /* Extension */
        code span.fl { color: #0000cf; } /* Float */
        code span.fu { color: #204a87; font-weight: bold; } /* Function */
        code span.im { } /* Import */
        code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
        code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
        code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
        code span.ot { color: #8f5902; } /* Other */
        code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
        code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
        code span.ss { color: #4e9a06; } /* SpecialString */
        code span.st { color: #4e9a06; } /* String */
        code span.va { color: #000000; } /* Variable */
        code span.vs { color: #4e9a06; } /* VerbatimString */
        code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
        <link rel="stylesheet" href="../web_template/aqua.css" />  
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
      
</head>

<body>
    <div id="content">
                 <header id="title-block-header">
            <h1 class="title">Unit 08. Practice 8.1</h1>
            <!---->
            <!--  -->
                    </header>
                 <nav id="TOC" role="doc-toc">
            <div class="navContainer">
                 <ul>
<li><a href="#practice-8.1.-api-rest"
id="toc-practice-8.1.-api-rest"><span
class="toc-section-number">1</span> Practice 8.1. API REST</a>
<ul>
<li><a href="#exercise-1.-rest-web-services"
id="toc-exercise-1.-rest-web-services"><span
class="toc-section-number">1.1</span> Exercise 1. REST Web
services</a></li>
<li><a href="#how-to-submit-to-github-classroom"
id="toc-how-to-submit-to-github-classroom"><span
class="toc-section-number">1.2</span> How to submit to GitHub
Classroom</a></li>
</ul></li>
</ul>
            </div>
        </nav>
                <main>
            <h1 data-number="1" id="practice-8.1.-api-rest"><span
            class="header-section-number">1</span> Practice 8.1. API
            REST</h1>
            <blockquote>
            <p>This practice is the next in the series of practices
            consisting of a Contacts application. This practice is based
            on the previous one. Before start it, finish the previous
            one, make the corrections you consider, if needed, and start
            coding.</p>
            <p>The inclusion of comments in the scripts will be
            valued.</p>
            <p>Before start, create a new git branch named
            <code>contacts-u8</code> and change to it:</p>
            <div class="sourceCode" id="cb1"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch contacts-u8</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout contacts-u8</span></code></pre></div>
            <p>Do all the practice in the <code>contacts-u8</code>
            branch. Once finished, do the submission via GitHub
            Classroom as detailed in the end of the practice.</p>
            </blockquote>
            <h2 data-number="1.1"
            id="exercise-1.-rest-web-services"><span
            class="header-section-number">1.1</span> Exercise 1. REST
            Web services</h2>
            <p>Build the next web services:</p>
            <table>
            <thead>
            <tr class="header">
            <th>Action</th>
            <th>Method</th>
            <th>Route</th>
            </tr>
            </thead>
            <tbody>
            <tr class="odd">
            <td>List of all contacts</td>
            <td>GET</td>
            <td>/api.php</td>
            </tr>
            <tr class="even">
            <td>Single contact</td>
            <td>GET</td>
            <td>/api.php?id=XX</td>
            </tr>
            <tr class="odd">
            <td>Insert a new contact</td>
            <td>POST</td>
            <td>/api.php</td>
            </tr>
            <tr class="even">
            <td>Update a contact</td>
            <td>PUT</td>
            <td>/api.php?id=XX</td>
            </tr>
            <tr class="odd">
            <td>Delete a book</td>
            <td>DELETE</td>
            <td>/api.php?id=XX</td>
            </tr>
            </tbody>
            </table>
            <p>Make sure that, for the POST and PUT methods, the data
            are <strong>validated</strong> with the next rules:</p>
            <ul>
            <li><strong>title</strong>: one of ‘Mr.’, ‘Mrs.’ or ‘Miss’.
            If the provided value is none of these, insert the default
            value ‘Mr.’, no error returned.</li>
            <li><strong>name</strong> and <strong>surname</strong>:
            required , not empty.</li>
            <li><strong>birthDate</strong>: required and must be a valid
            date (use the <code>checkContactDate</code> method).</li>
            <li><strong>phone</strong>. required and must be a valid
            phone (use the validation rules of unit 4).</li>
            <li><strong>email</strong>. required and must be a valid
            email (use the validation rules of unit 4).</li>
            <li><strong>favourite</strong>, <strong>important</strong>
            and <strong>archived</strong>: must be a boolean
            (<code>true</code>|<code>false</code>). If no data provided,
            insert the default value <code>false</code>.</li>
            </ul>
            <p>Use the <code>validate()</code> method from previous
            units.</p>
            <p>Structure of the responses:</p>
            <ul>
            <li>The first element must be <code>"result"</code> with 2
            possible values: <code>"OK"</code> or
            <code>"Error"</code>.</li>
            <li>The second element must be <code>"data"</code>. The
            query results must contain an object with the element data
            (GET by id) or an array containing all the objects of the DB
            (GET all). For the PUT, POST and DELETE methods, must
            contain an object with the modified/added element data. If
            no <code>id</code> provided (PUT, DELETE and GET by id) or
            if the <code>id</code> doesn’t exist, must shown an error
            message.</li>
            <li>A third element, <code>"errors"</code>, only must be
            shown if there are validation errors. Must contain an array
            with the property and the corresponding error message.</li>
            </ul>
            <p>Some examples of queries:</p>
            <p>Get requests:</p>
            <div class="sourceCode" id="cb2"><pre
            class="sourceCode php"><code class="sourceCode php"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Get a contact by id</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cn">GET</span> localhost<span class="op">/</span>contacts<span class="op">-</span>app<span class="op">/</span>api<span class="op">.</span>php<span class="ot">?</span>id<span class="op">=</span><span class="dv">1</span></span></code></pre></div>
            <p>Result, correct id:</p>
            <figure>
            <img src="images/get_id.png" width="300" alt="Get by id" />
            <figcaption aria-hidden="true">Get by id</figcaption>
            </figure>
            <p>Result, incorrect id:</p>
            <figure>
            <img src="images/get_id_error.png" width="300"
            alt="Get by id not found" />
            <figcaption aria-hidden="true">Get by id not
            found</figcaption>
            </figure>
            <p>Post request:</p>
            <div class="sourceCode" id="cb3"><pre
            class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="er">//</span> <span class="er">Correct</span> <span class="er">POST</span> <span class="er">request:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">localhost/contacts-app/api.php</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Miss&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Ruth&quot;</span><span class="fu">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;surname&quot;</span><span class="fu">:</span> <span class="st">&quot;Parsons&quot;</span><span class="fu">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;birthDate&quot;</span><span class="fu">:</span> <span class="st">&quot;1967-11-23&quot;</span><span class="fu">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;phone&quot;</span><span class="fu">:</span> <span class="st">&quot;611223344&quot;</span><span class="fu">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;parsons@mail.com&quot;</span><span class="fu">,</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;favourite&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;important&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;archived&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
            <p>Result:</p>
            <figure>
            <img src="images/post.png" width="250" alt="POST" />
            <figcaption aria-hidden="true">POST</figcaption>
            </figure>
            <p>Put request:</p>
            <div class="sourceCode" id="cb4"><pre
            class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="er">//</span> <span class="er">Incorrect</span> <span class="er">PUT</span> <span class="er">request,</span> <span class="er">invalid</span> <span class="er">name</span> <span class="er">and</span> <span class="er">date:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="er">PUT</span> <span class="er">localhost/contacts-app/api.php?id=21</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Miss&quot;</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;   &quot;</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;surname&quot;</span><span class="fu">:</span> <span class="st">&quot;Parsons&quot;</span><span class="fu">,</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;birthDate&quot;</span><span class="fu">:</span> <span class="st">&quot;2123-11-23&quot;</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;phone&quot;</span><span class="fu">:</span> <span class="st">&quot;611223344&quot;</span><span class="fu">,</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;parsons@mail.com&quot;</span><span class="fu">,</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;favourite&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;important&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;archived&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
            <p>Result:</p>
            <figure>
            <img src="images/put_error.png" width="300" alt="PUT" />
            <figcaption aria-hidden="true">PUT</figcaption>
            </figure>
            <h2 data-number="1.2"
            id="how-to-submit-to-github-classroom"><span
            class="header-section-number">1.2</span> How to submit to
            GitHub Classroom</h2>
            <ol type="1">
            <li>This task must be submitted to the same repository of
            the previous one. Remember to make a new branch before
            starting the practice.</li>
            <li>Once you finish the task, make a commit with the comment
            “PRACTICE 8.1 SUBMISSION COMMIT”, merge the branch into the
            main branch, and push it to GitHub. For example:</li>
            </ol>
            <div class="sourceCode" id="cb5"><pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;PRACTICE 8.1 SUBMISSION COMMIT&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout main</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> merge contacts-u8</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
            <ol start="3" type="1">
            <li>Before that, you can do the commits and pushes you want.
            If you change your code after your submission commit, make
            another commit and push with the same text in the message
            adding the corrections you’ve done. Make a pull-request if
            you want so i could know your code is submitted.</li>
            <li>Once pushed to GitHub, create a tag with the name
            “Practice 8”. Create a new tag if you make corrections after
            the first submission (ex. “Practice 8 corrected”).</li>
            </ol>
            <p>If you have any doubt in your task, you can push your
            code and ask me by email what’s your problem.</p>
        </main>
        

        <!--- Modal images -->

        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- The Close Button -->
            <!--span class="close">&times;</span-->

            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="img01">

            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>

        <!-- End Modal Images -->

        <!-- Snackbar for copy code -->
        <div id="snackbar">Codi copiat!</div>
        <!-- End Snackbar -->

        <script>
            function ModalizeImages() {
                // Script basat en https://www.w3schools.com/howto/howto_css_modal_images.asp
                // PEr ampliar imatges en fer click

                // Get the modal
                var modal = document.getElementById("myModal");

                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");

                // Get the image and insert it inside the modal - use its "alt" text as a caption
                //var img = document.getElementById("myImg");
                document.querySelectorAll("img").forEach((img => {
                        img.onclick = function() {
                            modal.style.display = "block";
                            modalImg.src = this.src;
                            captionText.innerHTML = this.alt;
                        }
                    }))
                    // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks on <span> (x), close the modal
                //span.onclick = function() {
                myModal.onclick = function() {
                    modal.style.display = "none";
                }


            }


            function markItem(id) {
                // Restaurem format de tots
                document.querySelectorAll("#TOC a").forEach(function(item) {
                        //item.style.fontWeight = "300";
                        item.classList.remove("navItemSelected");
                    })
                    //item.style.color = "#ff0000";

                // Afegim format
                let items = document.querySelectorAll("#TOC a[href='#" + id + "']");
                items.forEach(function(item) {
                    //item.style.fontWeight = "bolder";
                    item.classList.add("navItemSelected");
                })

            }

            var observer = new IntersectionObserver(function(entries) {
                // isIntersecting is true when element and viewport are overlapping
                // isIntersecting is false when element and viewport don't overlap
                if (entries[0].isIntersecting === true) {
                    let id = entries[0].target.id;
                    markItem(id);
                }

            }, {
                threshold: [0]
            });

            window.addEventListener("load", function() {
                document.querySelectorAll("h1, h2, h3").forEach(function(item) {
                    observer.observe(item);
                });

                document.querySelectorAll("#TOC a").forEach(function(item) {
                    item.addEventListener("click", function(item) {
                        markItem(item.id);
                    })
                })

                // Fem modals totes les imatges
                ModalizeImages();
            })

            document.querySelector("#TOC").addEventListener("click", function(event) {
                let toc = event.target
                if (toc.offsetWidth > 10) {
                    toc.classList.add("minimizedToc");
                }
            })

            document.querySelector("#TOC").addEventListener("mouseover", function(event) {
                let toc = event.target
                if (toc.classList.contains("minimizedToc"))
                    toc.classList.remove("minimizedToc");
            })


                        
            /* PER COPIAR CODI */


            // Busca tots els elements amb la classe "sourceCode"
            var sourceCodeElements = document.querySelectorAll('div.sourceCode');

            /*Afegim el botó a tots els divs */
            // Afegir un botó per a cada element "sourceCode"
            sourceCodeElements.forEach(function(element) {
                console.log(element.id);
                var button = document.createElement('div');
                button.className = 'button-copy';

                // Afegir una icona al botó (fa servir FontAwesome com a exemple)
                //var icon = document.createElement('i');
                //icon.className = 'fas fa-copy'; // Utilitza l'ícona "copy" de FontAwesome

                // Obté l'ID de l'element actual
                var elementId = element.id;

                // Afegeix un event listener al botó per cridar la funció amb l'ID
                button.addEventListener('click', function() {
                    copyContent(elementId);
                });

                // Afegeix l'icona al botó i el botó just dins de l'element "sourceCode"
                //button.appendChild(icon);
                element.appendChild(button);
            });



            // Funció per copiar el contingut d'un element amb l'ID donat
            function copyContent(elementId) {
                var element = document.getElementById(elementId);
                var textToCopy = element.innerText;

                // Crea un element de text i copia el contingut
                var textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);

                // Selecciona i copia el text
                textArea.select();
                document.execCommand('copy');

                // Elimina l'element de text afegit temporalment
                document.body.removeChild(textArea);

                // Notifica a l'usuari que el codi s'ha copiat
                mostraSnackbar();
            }

            /* SNACKBAR EN COPIAR CODI */

            function mostraSnackbar() {
            // Busquem l'snackbar
            var x = document.getElementById("snackbar");

            // Li afegim la classe show
            x.className = "show";

            // I als tres segons la llevem
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            } 




        </script>
    </div>
</body>

</html>